# DIMP（去中心化即时通讯协议）技术白皮书 (V0.1)

草案：**2018年11月11日** (@moky)

**摘要:** 本文档引入一种新的为即时通讯而设计的协议，以及一个为开发分布式即时通讯应用而设计的技术架构。该软件提供了一个账号系统（用户身份认证）以及在各账号之间通过端对端加密实现的安全通讯服务。

Copyright &copy; 2018 Albert Moky

## 0. 背景
即时通讯（IM）是目前 Internet 上最为流行的通讯方式，它允许网络上的两个人或多人使用网络实时的传递文字消息、文件、语音与视频交流。
从用户使用场景角度，目前市场上的IM工具可划分为**企业级IM工具**（如钉钉、企业微信、RTX 等）和**个人IM工具**（如 WeChat、QQ、Facebook、Whatsapp、Telegram 等）两大类。

而当前所有最流行的 IM 工具其平台架构设计都是中心化的，每个工具背后都是一套自有的账号认证系统以及消息转发系统。这将造成3个难以彻底解决的问题：

1. 每个用户的账号密码以及关系链等重要资料都被绑定在特定的平台上，其他平台无法共享；
2. 每个平台需要中心化的数据库来存储用户账号密码等资料，这些中心点很容易成为黑客攻击的目标；
3. 用户完全依赖于其所在的 IM 平台处理能力，一旦出现中心故障将可能导致无法登录与通讯。

问题1的主要症结在于这种中心化机制不利于**持续创新**，容易形成**寡头垄断**市场。而一旦垄断形成，即使寡头丧失创新能力，其用户也会由于迁移成本过高而必须继续忍受其落后的通讯方式，难以享受其他开发者提供的更优质的服务。

同时由于各家平台账号难以互通，即使寡头尚未完全形成，几家头部企业的用户相互之间也无法通讯。从而导致每个用户需要同时安装多个客户端并频繁切换的不良体验。

更进一步地，由于用户需求的多样性，很难在一款 IM 工具上承载所有的用户需求特性，而同时开发和维护多款 IM 工具显然超出了一家企业的能力范围（无论这家企业多么庞大）。

问题2的主要症结在于**信息安全**。由于中心化的账号系统设计，给黑客创造了大批量窃取用户资料的有利条件。

问题3的重点是**单点故障**风险，平台需要投入巨大资源以确保其网络（尤其是中心节点）正常运行。而一旦由于某些原因导致该平台停止服务，用户完全没有选择的余地。

在中心化 IM 技术已发展完备的今天，以上问题（或隐患）一直未能彻底消除，所以市场需要一种全新的去中心化的 IM 技术来满足更安全更丰富的通讯需求。

## 1. 去中心化 IM 工具的需求
### 去中心化的用户身份认证技术
### 基于端对端加密的安全通讯技术
### 高并发（支持亿级用户）
### 低延时
### 免费使用
### 可定制、可升级
## 2. 共识
### 身份确认
### 关系维护
### 消息加密与校验
## 3. 账号
## 4. 消息
## 5. 扩展
## 6. 结论

